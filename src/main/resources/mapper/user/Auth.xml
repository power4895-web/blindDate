<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.self_board_project.user.mapper.AuthMapper">

	<select id="getUserInfo" resultType="com.example.self_board_project.core.authority.Auth">
	/** getUserInfo **/
	SELECT 
		 id
		, login_id 
		, real_name
		, role
		, gender
		, password
	FROM user  t1
	where 1=1
	<if test="loginId != null and loginId != ''">
		AND login_id = #{loginId}
	</if>
	<if test="username != null and username != ''">
		AND username = #{username}
	</if>
	<if test="id != null and id != ''">
		AND id = #{id}
	</if>
	</select>


	<insert id="insertAuth" useGeneratedKeys="true" keyProperty="id">
		/** insertUser **/
		INSERT INTO `user`( provider
						  , provider_id
						  , username
						  , role
						  , password
						  , create_date)

		VALUES ( #{provider}
			   , #{providerId}
			   , #{username}
			   , #{role}
			   , #{password}
			   , now())
	</insert>


<!--	<insert id="insertLoginLog">-->
<!--	/** insertLoginLog **/-->
<!--	INSERT INTO tb_user_log(-->
<!--		 user_id-->
<!--		, ip-->
<!--		, login_time-->
<!--	)VALUES(-->
<!--		#{userId}-->
<!--		, #{ip}-->
<!--		, NOW()-->
<!--	)-->
<!--	</insert> -->
	
</mapper>